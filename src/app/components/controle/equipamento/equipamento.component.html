<div class="container1">
  <div ngbAccordion #accordion="ngbAccordion">
    <div ngbAccordionItem="first" [collapsed]="false">
      <h2 ngbAccordionHeader>
        <button ngbAccordionButton>Equipamento</button>
      </h2>
      <div ngbAccordionCollapse>
        <div ngbAccordionBody>
          <ng-template>
            <div class="table table-striped">
              <table class="table">
                <tr>
                  <th scope="col">Id</th>
                  <th scope="col">Nome</th>
                  <th scope="col">Gerente</th>
                  <th scope="col">Distrito</th>
                  <th scope="col">Contato</th>
                  <th scope="col">descricao</th>
                  <th scope="col">Opções</th>
                </tr>
                <tbody>
                  <tr *ngFor="let equipamento of list; let i = index">
                    <td scope="row">
                      {{ equipamento.id }}
                    </td>
                    <td scope="row">
                      {{ equipamento.nomeEquipamento }}
                    </td>
                    <td scope="row">
                      {{ equipamento.gerente }}
                    </td>
                    <td scope="row">
                      {{ equipamento.distrito }}
                    </td>
                    <td scope="row">
                      <button
                        class="btn btn-outline-primary"
                        (click)="openRegularModal(mostraContatos, equipamento)"
                      >
                        Contatos
                      </button>
                    </td>
                    <td>
                      {{
                        equipamento.descricao
                          ? equipamento.descricao
                          : "Sem descrição"
                      }}
                    </td>
                    <td class="option-td">
                      <button type="button" class="btn btn-outline-info">
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-pencil"
                          viewBox="0 0 16 16"
                        >
                          <path
                            d="M12.146.146a.5.5 0 0 1 .708 0l3 3a.5.5 0 0 1 0 .708l-10 10a.5.5 0 0 1-.168.11l-5 2a.5.5 0 0 1-.65-.65l2-5a.5.5 0 0 1 .11-.168l10-10zM11.207 2.5 13.5 4.793 14.793 3.5 12.5 1.207 11.207 2.5zm1.586 3L10.5 3.207 4 9.707V10h.5a.5.5 0 0 1 .5.5v.5h.5a.5.5 0 0 1 .5.5v.5h.293l6.5-6.5zm-9.761 5.175-.106.106-1.528 3.821 3.821-1.528.106-.106A.5.5 0 0 1 5 12.5V12h-.5a.5.5 0 0 1-.5-.5V11h-.5a.5.5 0 0 1-.468-.325z"
                          />
                        </svg>
                      </button>
                      <button
                        type="button"
                        class="btn btn-outline-info"
                        (click)="
                          openDeleteConfirmationModal(deletar, equipamento)
                        "
                      >
                        <svg
                          xmlns="http://www.w3.org/2000/svg"
                          width="16"
                          height="16"
                          fill="currentColor"
                          class="bi bi-trash3"
                          viewBox="0 0 16 16"
                        >
                          <path
                            d="M6.5 1h3a.5.5 0 0 1 .5.5v1H6v-1a.5.5 0 0 1 .5-.5ZM11 2.5v-1A1.5 1.5 0 0 0 9.5 0h-3A1.5 1.5 0 0 0 5 1.5v1H2.506a.58.58 0 0 0-.01 0H1.5a.5.5 0 0 0 0 1h.538l.853 10.66A2 2 0 0 0 4.885 16h6.23a2 2 0 0 0 1.994-1.84l.853-10.66h.538a.5.5 0 0 0 0-1h-.995a.59.59 0 0 0-.01 0H11Zm1.958 1-.846 10.58a1 1 0 0 1-.997.92h-6.23a1 1 0 0 1-.997-.92L3.042 3.5h9.916Zm-7.487 1a.5.5 0 0 1 .528.47l.5 8.5a.5.5 0 0 1-.998.06L5 5.03a.5.5 0 0 1 .47-.53Zm5.058 0a.5.5 0 0 1 .47.53l-.5 8.5a.5.5 0 1 1-.998-.06l.5-8.5a.5.5 0 0 1 .528-.47ZM8 4.5a.5.5 0 0 1 .5.5v8.5a.5.5 0 0 1-1 0V5a.5.5 0 0 1 .5-.5Z"
                          />
                        </svg>
                      </button>
                    </td>
                  </tr>
                </tbody>
              </table>
            </div>
          </ng-template>
        </div>
      </div>
    </div>
  </div>
  <div class="bg-table-style">
    <button
      type="button"
      class="button"
      (click)="openCreateModal(criarEquipamento)"
    >
      <span class="button__text">Cadastrar</span>
      <span class="button__icon"
        ><svg
          xmlns="http://www.w3.org/2000/svg"
          width="24"
          viewBox="0 0 24 24"
          stroke-width="2"
          stroke-linejoin="round"
          stroke-linecap="round"
          stroke="currentColor"
          height="24"
          fill="none"
          class="svg"
        >
          <line y2="19" y1="5" x2="12" x1="12"></line>
          <line y2="12" y1="12" x2="19" x1="5"></line></svg
      ></span>
    </button>
  </div>
</div>

<ng-template #criarEquipamento let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Novo equipamento</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <app-equipamento-modal></app-equipamento-modal>
  </div>
</ng-template>

<ng-template #mostraContatos let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Lista de contatos:</h4>
    <button
      type="button"
      class="btn-close"
      aria-label="Close"
      (click)="modal.dismiss('Cross click')"
    ></button>
  </div>
  <div class="modal-body">
    <div *ngFor="let contato of contatosDoEquipamento">
      <p>{{ contato }}</p>
    </div>
  </div>
  <div class="modal-footer"></div>
</ng-template>

<ng-template #deletar let-modal>
  <div class="modal-header">
    <h4 class="modal-title">Deseja excluir ?</h4>
  </div>
  <div class="modal-footer">
    <button class="btn btn-secondary" (click)="modal.dismiss('Não')">
      Não
    </button>
    <button class="btn btn-danger" (click)="deletarEquipamento()">Sim</button>
  </div>
</ng-template>
